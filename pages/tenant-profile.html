<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, user-scalable = no">
    <link href="https://fonts.googleapis.com/css2?family=Merienda:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/profile.css">
    <link rel="icon" href="../assets/images/Logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>parkin</title>
</head>

<body>
    <header>
        <!-- header -->
        <div class="header_logo">
            <img id="head_logo" src="../assets/images/lgo.png" alt="logo">
        </div>
        <div id="lf">Tenant profile</div>
        <!-- <a id="h" href="#">Home</a> -->
        <nav id="nav">
            <!-- Navigation links -->
            <a id="park_pl">Parking places</a>
            <a id="edi">Edit profile</a>
            <a id="paym">Payment</a>
            <a href="../index.html">Log out</a>
        </nav>
        <div class="respons_nav">
            <i class="fa-solid fa-bars" id="bttn"></i>
            <div class="menu-list">
                <a id="park_pl">Parking places</a>
                <a id="edi">Edit profile</a>
                <a id="paym">Payment</a>
                <a href="../index.html">Log out</a>
            </div>
        </div>
    </header>
    <!-- main -->
    <main>
        <!-- <div id="head">My profile</div>
        <button id="edi" >Edit</button> -->
        <div class="profile">
            <div id="avatar_img"></div>
            <img id="def_img" src="../assets/images/upload_template.jpeg" alt="upload_template">

            <div class="details">
                <h3 id="name">Name:&nbsp;&nbsp;<span id="input1"></span></h3>
                <h3 id="phn">Phone number:&nbsp;&nbsp;<span id="input2"></span></h3>
                <h3 id="addres">Address:&nbsp;&nbsp;<span id="input3"></span></h3>
            </div>
        </div>
        <!-- <div id="bike-img"> -->

        <div id="bike1"></div>
        <img id="bik1" src="../assets/Images/defa.jpg" alt="upload_bike_template">
        <!-- </div> -->
    </main>
    <script>

        console.log("1")

        let tenan_sign = JSON.parse(localStorage.getItem("Tenant_sign"));
        let user = JSON.parse(localStorage.getItem("Tenant"));
        let tenan_log = JSON.parse(localStorage.getItem("Tenant_details"))
        let input1 = document.getElementById("input1")
        let input2 = document.getElementById("input2")
        let input3 = document.getElementById("input3")

        console.log(user);
        console.log(tenan_log);

        const url = window.location.search;
        const urlParams = new URLSearchParams(url)
        let mail = urlParams.get('mail');

        let res;
        res = user.find(e => {
            let E_mail = e["Email"]
            if (mail == E_mail) {
                return true;
            }
        })

            if(res==undefined){
                user.find(el => {
                    if (el["Email"] == tenan_log["Email"]) {
                        return res = el;
                    }
                })

            }
        console.log(res);

        input1.innerText = res["Firstname"]
        input2.innerText = res["phone_number"]
        input3.innerText = res["Address"]

        let vehicle = document.getElementById("bike1")
        vehicle.innerHTML = `<img src="${res["upload_image"]}" border="0" id="prof_bike" alt="vehicle_img" height=500px width=350px>`

        let user_img = document.getElementById("avatar_img");
        user_img.innerHTML = `<br><img src="${res["user_image"]}" id="user_im" border="0" alt="user_img" height=130px width=120px>`


        document.getElementById("edi").addEventListener("click", (e) => {
            console.log("clicked")
            window.location.href = "Tenant-edit.html?mail=" + res["Email"]
        })

        document.getElementById("park_pl").addEventListener("click", (j)=>{
            window.location.href = "tenant-choose-place.html?mail=" + res["Email"]
        })

        document.getElementById("paym").addEventListener("click", (b)=>{
            window.location.href = "tenant-payment.html?name=" + res["Firstname"]

        })

    </script>
</body>