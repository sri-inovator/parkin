<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Merienda:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/tenant-choosetime.css">
    <link rel="icon" href="../assets/images/Logo.png">
    <title>parkin</title>
</head>

<body>
    <!-- header -->
    <header>
        <!-- header -->
        <div class="header_logo">
            <img id="head_logo" src="../assets/images/lgo.png" alt="logo">
        </div>
        <nav id="nav">

            <!-- Navigation links -->
            <a href="tenant-choose-place.html">Explore other places</a>
            <a href="../index.html">Log out</a>

        </nav>

    </header>
    <!-- main -->
    <main>
        <!-- parking images -->
        <div class="images">
            <div id="heading">Parking place Image</div>
            <div id="parking_image1"></div>
        </div>
        <!-- Leaser details -->
        <div class="leaser_detail">
            <div id="name-number">
                <p>Name: <span id="leaser_name"></span></p>
                <p>Phone&nbsp;Number:<span id="leaser_number"></span></p>
            </div>
            <!-- Time choosing space -->
            <form>
                <h3>Choose the duration of your parking :</h3>
                <br><br><br><br><br>
                <label for="time-start">start-time</label>&nbsp;&nbsp;&nbsp;
                <input type="datetime-local" id="start-time" required><br><br>
                <label for="time-end">End-time</label>&nbsp;&nbsp;&nbsp;
                <input type="datetime-local" id="End-time" required><br><br>
                <!-- <label>Enter registered email</label>
                <input type="email" id="emil" required> -->
                <br>
                <!-- request button -->
                <button id="request-btn">Give Request</button>
            </form>
        </div>
    </main>
    <!-- footer -->
    <footer>
        <div id="foot">
            <div id="park">
                <img id="flogo" src="../assets/images/lgo.png" alt="logo">
                <p>Parkin is an website that helps<br> to connect both Tenant and Leaser</p>
            </div>
            <div id="contact">
                <h2>Get in touch</h2>
                <img id="flt" src="../assets/images/lt.png" alt="symbol">
                <div id="ct">
                    <h5 id="fc">Taramani,chennai</h5><br>
                    <h5 id="ftc">www.parkin.com</h5>
                </div>
            </div>
            <div id="ftnav"><br>
                <a href="#">Home</a><br>
                <a href="leaser-log.html">Leaser</a><br>
                <a href="Tenant-log.html">Tenant</a><br>
                <a href="about.html">About</a><br>
            </div>
        </div>
        <div id="blk">
        </div>
    </footer>
</body>
<script>
    const leaser_details = JSON.parse(localStorage.getItem("leaser"))


    const url = window.location.search;
    const urlParams = new URLSearchParams(url)
    let name = urlParams.get('name');

    let details = leaser_details.find(el => {

        let first_name = el["firstname"]

        if (name == first_name) {
            return true
        }
        else {
            return false
        }

    });

    console.log(details)


    let first_name = document.getElementById("leaser_name")
    let phon_num = document.getElementById("leaser_number")
    let parkin_img = document.getElementById("parking_image1")

    first_name.innerText = details["firstname"]
    phon_num.innerText = details["phone_number"]
    parkin_img.innerHTML = `<img src="${details["upload_image"]}" alt="Hv4a2Tv.jpg" border="0" height="255px" width="430px" id="parking_image1">`

    const tenant_details = JSON.parse(localStorage.getItem("Tenant"))
    console.log(tenant_details);

    const tenant_login = JSON.parse(localStorage.getItem("Tenant_details"))
    console.log(tenant_login);

    // validation of Email

    document.querySelector("form").addEventListener("submit", l => {
        l.preventDefault();

        let valid;
        let key;
        tenant_details.find(e=>{
            if(e["Email"]==tenant_login["Email"]) {
                return key = e;
            }
        })
            const star_time = document.getElementById("start-time").value;
            const end_time = document.getElementById("End-time").value;

            key["parking_start_time"] = star_time;
            key["parking_end_time"] = end_time;
            key["Request_person_email"] = details["email"]
            key["Request status"] = "pending";


            localStorage.setItem("Tenanat", JSON.stringify(tenant_details))
            window.location.href="tenant-request.html";

    })

</script>

</html>