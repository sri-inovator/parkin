<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Merienda:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/tenant-payment.css">
    <link rel="icon" href="../assets/images/Logo.png">
    <title>parkin</title>
</head>

<body>
    <header>
        <!-- header -->
        <div class="header_logo">
            <img id="head_logo" src="../assets/images/lgo.png" alt="logo">


        </div>

        <nav id="nav">
            <!-- Navigation links -->
        </nav>
    </header>
    <main>
        <div class="alter_main">

        </div>
        <div class="main-container">
            <div class="pay">
                <div id="head">Amount Details</div>
                <div class="amount-details">
                    <div id="duration">Parking duration</div>
                    <div id="time"></div><br>
                    <hr>
                    <p id="amount">Payable Amount</p>
                    <div id="rupee"></div>
                </div>

                <!-- href="../index.html" -->
            </div>
            <div class="payment_options">
                <hr>
                <div id="prof_nam"></div>
                <div id="prof_mail"></div>
                <hr>
                <h2 id="h">Enter your UPI Number or UPI ID:</h2>
                <form>
                    <label id="lab" for="search"></label>
                    <input type="text" id="searc" name="search" required><br>
                    <button id="btn" type="submit">Proceed</button>
                </form>
                <hr>
                <!-- <div class="or">
                    <div id="choice"><span class="check">or</span>
                </div> -->
                <img id="qr" src="../assets/images/parkqr.png" alt="qr-code">
                <p id="qrcode">Scan this QR code and pay the amount</p>
            </div>
        </div>
    </main>

    <script>

        const ur = window.location.search

        let container = document.querySelector(".main-container");

        let alt_container = document.querySelector(".alter_main");

        let htag;
        let back;
        let prof_nam;
        let prof_mail;
        let dat;



        let user = JSON.parse(localStorage.getItem("Tenant_additional_det"));
        console.log(user);

        let tenan_log = JSON.parse(localStorage.getItem("Tenant_details"))
        console.log(tenan_log);

        const ul = window.location.search;
        const upara = new URLSearchParams(ul)
        let name = upara.get('name');

        dat = user.find((a) => {
            let Name = a["Firstname"]

            if (Name == name) {
                return true
            }
            else {
                return false
            }
        });
        console.log(dat);


        htag = document.createElement("h1");
        htag.setAttribute("id", "hdd");
        htag.innerHTML = `(Now you dont have pending amount to pay)<br><br>`
        alt_container.append(htag);

        back = document.createElement("a")
        back.setAttribute("id", "prof");
        if(dat==undefined){
            back.setAttribute("href", "#")
        }
        else{
            back.setAttribute("href", "tenant-profile.html?mail=" + dat["Email"])
        }
       
        back.innerHTML = `Back to profile`;
        htag.append(back);


        const url = window.location.search;
        const urlParams = new URLSearchParams(url)
        let mail = urlParams.get('mail');

        data = user.find((e) => {
            let email = e["Email"]

            if (mail == email) {
                return true
            }
            else {
                return false
            }
        });

        console.log(data);

        if (data == undefined) {
            container.style.display = "none";
            // prof_nam.style.display = "none";
            alt_container.style.display = "flex";
        }
        else {
            // if (dat == undefined) {
                container.style.display = "flex";
                alt_container.style.display = "none";
                back.style.display = "flex";
            // }

        }

        prof_nam = document.getElementById("prof_nam")
        prof_nam.innerHTML = `<p> Name : ${data["Firstname"]} </p>`
        console.log(prof_nam);

        prof_mail = document.getElementById("prof_mail")
        prof_mail.innerHTML = `<p> Email : ${data["Email"]} </p>`

        let duration = document.getElementById("time");
        let amount = document.getElementById("rupee");

        duration.innerHTML = `<p> ${data["Park_duration_hours"]} Hour</p>`
        amount.innerHTML = `<p> &#8377;${data["parking_amount"]}</p>`

        proceed = document.getElementById("btn");

        proceed.addEventListener("click", e => {
            e.preventDefault()


        })


    </script>
</body>

</html>