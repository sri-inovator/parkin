<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, user-scalable = no">
  <link href="https://fonts.googleapis.com/css2?family=Merienda:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/signup-edit.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
    integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="icon" href="../assets/images/Logo.png">
  <title>Parkin</title>
</head>

<body>
  <header>

    <!-- header -->
    <div class="header_logo">
      <img id="head_logo" src="../assets/images/lgo.png" alt="logo">
    </div>

    <nav id="nav">
      <!-- Navigation links -->
      <a href="../index.html">Home</a>
      <a href="leaser-log.html">Leaser</a>
      <a href="Tenant-log.html">Tenant</a>
      <a href="about.html">About</a>
    </nav>
    <div class="respons_nav">
      <i class="fa-solid fa-bars" id="bttn"></i>
      <div class="menu-list">
        <a href="../index.html">Home</a>
        <a href="leaser-log.html">Leaser</a>
        <a href="Tenant-log.html">Tenant</a>
        <a href="about.html">About</a>
      </div>
    </div>
  </header>
  <div id="hed">
    <h2 id="hedi">Leaser Registration</h2>
  </div>
  <div class="container">
    <form method="post">
      <div class="row">
        <div class="col-25">
          <label for="fname">First Name</label>
        </div>
        <div class="col-75">
          <input type="text" id="fname" name="firstname" value="magesh" placeholder="Your First name.." maxlength="30"
            pattern="[a-zA-Z]+" required>
        </div>
      </div>

      <div class="row">
        <div class="col-25">
          <label for="lname">Last Name</label>
        </div>
        <div class="col-75">
          <input type="text" id="lname" name="lastname" value="N" placeholder="Your last name.." pattern="[a-zA-Z]+"
            required>
        </div>
      </div>

      <div class="row">
        <div class="col-25">
          <label for="email">Email</label>
        </div>
        <div class="col-75">
          <input type="email" id="email" name="user_email" value="mag.2003@gmail.com"
            pattern="^[a-zA-Z0-9][a-zA-Z0-9._%+-]*@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" required>
        </div>
      </div>

      <div class="row">
        <div class="col-25">
          <label for="name">Phone number</label>
        </div>
        <div class="col-75">
          <input type="tel" id="numb" value="7889416721" placeholder="Enter your number"
            title="please enter a valid phone number" required minlength="10" maxlength="10">
        </div>
      </div>

      <div class="row">
        <div class="col-25">
          <label for="name">Another number</label>
        </div>
        <div class="col-75">
          <input type="tel" id="number" value="9880418721" placeholder="Enter your number"
            title="please enter a valid phone number" required minlength="10" maxlength="10">
        </div>
      </div>

      <div class="row">
        <div class="col-25">
          <label for="subject">Address</label>
        </div>
        <div class="col-75">
          <textarea id="subject" name="subject" placeholder="Enter your Address.." style="height:50px"
            required>24,Raniyammal nagar,Taramani,chennai</textarea>
        </div>
      </div>

      <div class="row">
        <div class="col-25">
          <label for="subject">Parking location</label>
        </div>
        <div class="col-75">
          <textarea id="sub" name="subject" placeholder="Parking place location link" style="height: 40px"
            >https://maps.app.goo.gl/GDMJsrrocogSqWvg6</textarea>
        </div>
      </div>

      <div class="row">
        <div class="col-25">
          <label for="name">Password</label>
        </div>
        <div class="col-75">
          <input type="password" id="pass" name="numb" value="Kumar@2003"
            pattern="(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$"
            title="Your password must be at least 8 characters long, contain at least one digit or special character, one uppercase letter, and one lowercase letter, and must not contain dots or newline characters."
            required>
        </div>
      </div>

      <div class="row">
        <div class="col-25">
          <label for="name">Confirm Password</label>
        </div>
        <div class="col-75">
          <input type="password" id="password" name="numb" value="Kumar@2003"
            pattern="(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$"
            title="Your password must be at least 8 characters long, contain at least one digit or special character, one uppercase letter, and one lowercase letter, and must not contain dots or newline characters."
            required>
        </div>
      </div>

      <div class="row">

        <input type="submit" value="sign up">
      </div>

    </form>
    <script>


      let form = document.querySelector("form")
      form.addEventListener("submit", e => {
        e.preventDefault()

        const firstname = document.getElementById("fname").value.trim()
        const lastname = document.getElementById("lname").value.trim()
        const email = document.getElementById("email").value.trim()
        const number1 = document.getElementById("numb").value.trim()
        const number2 = document.getElementById("number").value.trim()
        const address = document.getElementById("subject").value.trim()
        const location = document.getElementById("sub").value;
        const password1 = document.getElementById("pass").value.trim()
        const password2 = document.getElementById("password").value.trim()



        if (password1 != password2) {
          alert("Oops !! password and confirm password doesn't match.")
        }
        else {
          let leaser = JSON.parse(localStorage.getItem("leaser")) ?? [];
          let j = 0;
          for (let i = 0; i < leaser.length; i++) {
            if (leaser[i]["email"] === email) {
              j = 1;
              break;
            }
          }
          if (j == 1) {
            alert("email already registered")
          }
          else {

            if (navigator.geolocation) {
              navigator.geolocation.getCurrentPosition(showPosition);
            }
            else {
              alert("Geolocation is not supported by this browser.")
            }
            function showPosition(position) {

              let lattitude = position.coords.latitude
              let longitude = position.coords.longitude
              console.log(lattitude, longitude); // 13.0963045  80.2865916
              let user_data = {
                "firstname": firstname,
                "lastname": lastname,
                "email": email,
                "phone_number": number1,
                "phone_number1": number2,
                "address": address,
                "location" : location,
                "password": password1,
                "confirm_password": password2,
                "Lattitude": lattitude,
                "Longitude": longitude
              }
              leaser.push(user_data)
              localStorage.setItem("leaser", JSON.stringify(leaser))
              window.location.href = "leaser-log.html"
              
            }
          }
        }
      })

      // function display(latitude, longitude) {

      //   let div = document.createElement("iframe");
      //   div.setAttribute("src", `https://www.google.com/maps/embed?q=${latitude},${longitude}`)
      //      // <iframe src="https://www.google.com/maps/embed?pb=!1m17!1m12!1m3!1d3886.9058589311658!2d80.19093771482271!3d13.041663990809903!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zMTPCsDAyJzMwLjAiTiA4MMKwMTEnMzUuMyJF!5e0!3m2!1sen!2sin!4v1683059744448!5m2!1sen!2sin" width="400" height="300" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      //     // < iframe src = "https://www.google.com/maps/embed?pb=!1m17!1m12!1m3!1d3886.9058589311658!2d80.19093771482271!3d13.041663990809903!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zMTPCsDAyJzMwLjAiTiA4MMKwMTEnMzUuMyJF!5e0!3m2!1sen!2sin!4v1683059343698!5m2!1sen!2sin" width = "600" height = "450" style = "border:0;" allowfullscreen = "" loading = "lazy" referrerpolicy = "no-referrer-when-downgrade" ></iframe >
      //     console.log(div)
      //       document.body.append(div)

      // }
    </script>
</body>
<script>














</script>

</html>